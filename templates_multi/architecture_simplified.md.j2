# Dossier d'Architecture d'Entreprise
## {{ project.Name }}

> **Version** : 1.0  
> **Date** : {{ project.get('Date', '2025-01-15') }}  
> **Statut** : üü° En r√©vision  

---

# üìã Table des Mati√®res

1. [R√©sum√© Ex√©cutif](#1--r√©sum√©-ex√©cutif)
2. [Contexte & P√©rim√®tre](#2--contexte--p√©rim√®tre)
3. [Analyse des Exigences](#3--analyse-des-exigences)
4. [Vues d'Architecture](#4--vues-darchitecture)
5. [Architecture Technique](#5--architecture-technique)
6. [S√©curit√© & Conformit√©](#6--s√©curit√©--conformit√©)
7. [Glossaire](#7--glossaire)
8. [Documents de R√©f√©rence](#8--documents-de-r√©f√©rence)
9. [Historique des R√©visions](#9--historique-des-r√©visions)

---

# 1 ¬∑ R√©sum√© Ex√©cutif

## üéØ Vision & Objectifs Strat√©giques

### Vision M√©tier
{{ project.Name }}

### Objectifs Business Mesurables
{% for obj in objectives %}
- **{{ obj.Objective }}** : Atteindre {{ obj.Target }} {{ obj.Unit }} (KPI: {{ obj.KPI }})
{% endfor %}

## üìä Vue d'Ensemble de l'Architecture

### Diagramme de Contexte Syst√®me
```plantuml
!include diagrams/c4_context.puml
```

### D√©cisions Architecturales Majeures
{% for pat in patternsandprincipes %}
- **{{ pat.Name }}
{% endfor %}


## üö¶ Recommandation & Next Steps

### D√©cision Go/No-Go : **üü¢ GO**

**Prochaines √©tapes critiques :**
- [ ] Validation s√©curit√© par le RSSI
- [ ] Setup des environnements de d√©veloppement
- [ ] Formation des √©quipes techniques

---

# 2 ¬∑ Contexte & P√©rim√®tre

## üè¢ Contexte Business

### Enjeux M√©tier
{{ project.get('Context', project.Name) }}

### P√©rim√®tre Fonctionnel
**Dans le p√©rim√®tre :**
{% if project.get('Scope') %}
{% for item in project.Scope.split(',') %}
- {{ item.strip() }}
{% endfor %}
{% endif %}

**Hors p√©rim√®tre :**
{% if project.get('Out_of_Scope') %}
{% for item in project.Out_of_Scope.split(',') %}
- {{ item.strip() }}
{% endfor %}
{% endif %}

## üé≠ Parties Prenantes

### Sponsors & Decision Makers
| R√¥le | Nom | Organisation | Responsabilit√© |
|------|-----|--------------|----------------|
| Sponsor M√©tier | TBD | Direction M√©tier | Financement & Vision |
| RSSI | TBD | S√©curit√© | Validation s√©curit√© |
| DSI | TBD | IT | Impl√©mentation |


## ‚è±Ô∏è Contraintes & D√©pendances

### Contraintes Temporelles
| Jalon | Date Cible | Criticit√© |
|-------|-----------|-----------|
{% for constraint in constraints if constraint.Type == 'Planning' %}
| {{ constraint.Milestone }} | {{ constraint.Date }} | üî¥ Critique |
{% endfor %}

### Contraintes Budg√©taires
{% for constraint in constraints if constraint.Type == 'Budget' %}
- **Budget total** : {{ constraint.Value }}
{% endfor %}

### D√©pendances Externes
- Validation r√©glementaire ( PCI-DSS)

---

# 3 ¬∑ Analyse des Exigences

## üìã Exigences Fonctionnelles

### Processus M√©tier Couverts
| ID | Processus | Description | Acteurs | Criticit√© |
|----|-----------|-------------|---------|-----------|
{% for proc in businessprocesses %}
| {{ proc.ID | clean_nan }} | **{{ proc.Name | clean_nan }}** | {{ proc.Description | clean_nan }} | {{ proc.Actors | clean_nan }} | üü° Standard |
{% endfor %}

### Matrice Fonctionnelle
| Processus | Applications Supportantes | Donn√©es Manipul√©es |
|-----------|---------------------------|-------------------|
{% for proc in businessprocesses %}
| {{ proc.Name }} | {% set apps = [] %}{% for flow in flows if flow.BusinessProcess == proc.Name %}{% if flow.Outbound not in apps %}{% set _ = apps.append(flow.Outbound) %}{% endif %}{% if flow.Inbound not in apps %}{% set _ = apps.append(flow.Inbound) %}{% endif %}{% endfor %}{{ apps | join(', ') }} | {% for data in data_entities %}{{ data.Entity }}{% if not loop.last %}, {% endif %}{% endfor %} |
{% endfor %}

## üîß Exigences Non-Fonctionnelles

### Exigences de Performance
| M√©trique | Objectif | Mesure | SLA |
|----------|----------|--------|-----|


### Exigences de S√©curit√©
| Domaine | Exigence | Standard | Validation |
|---------|----------|----------|-----------|


### Exigences de Conformit√©
| R√©glementation | P√©rim√®tre | Contr√¥les Requis | Responsable |
|----------------|-----------|------------------|-------------|
| PCI-DSS | Donn√©es de paiement | Tokenisation, Audit | RSSI |

---

# 4 ¬∑ Vues d'Architecture

## üèóÔ∏è Vue M√©tier (Business View)

### Cartographie des Capacit√©s
{% if capabilities %}
```plantuml
!include diagrams/capabilities_map.puml
```

| Domaine | Capacit√© | Niveau | Description | Applications Support |
|---------|----------|--------|-------------|---------------------|
{% for capability in capabilities %}
| **{{ capability.Domain }}** | {{ capability.Name }} | {{ capability.Level }} | {{ capability.Description }} | {{ capability.Applications }} |
{% endfor %}
{% else %}
Non renseign√©
{% endif %}

### Flux de Valeur
{% if valuestreams %}
```plantuml
!include diagrams/value_streams.puml
```

| Flux de Valeur | Description | √âtapes | Capacit√©s Requises |
|----------------|-------------|--------|-------------------|
{% for stream in valuestreams %}
| **{{ stream.Name | clean_nan }}** | {{ stream.Description | clean_nan }} | {{ stream.Steps | format_steps }} | {{ stream.Capabilities | clean_nan }} |
{% endfor %}
{% else %}
Non renseign√©
{% endif %}

## üñ•Ô∏è Vue Applicative (Application View)

### Cartographie Applicative
```plantuml
!include diagrams/overview.puml
```

### Matrice Application-Processus
| Application M√©tier | Application | Processus Support√©s | Statut |
|--------------------|-------------|---------------------|--------|
{% set business_apps = applications | groupby('BusinessApp') %}
{% for business_app, apps_list in business_apps %}
{% for app in apps_list %}
| {% if loop.first %}**{{ business_app }}**{% endif %} | **{{ app.Name }}** | {% for proc in businessprocesses %}{% if app.ID in flows | selectattr('BusinessProcess', 'equalto', proc.Name) | map(attribute='Outbound') | list %}{{ proc.Name }}{% if not loop.last %}, {% endif %}{% endif %}{% endfor %} | {{ app.Status }} |
{% endfor %}
{% endfor %}

### Matrice Capacit√©s-Applications
{% if capabilities %}
```plantuml
!include diagrams/capability_app_matrix.puml
```
{% endif %}



## üóÑÔ∏è Vue Donn√©es (Data View)

### Mod√®le de Donn√©es Conceptuel
| Entit√© | Description | Classification | R√©tention |
|--------|-------------|----------------|-----------|
{% for data in data_entities %}
| **{{ data.Entity | clean_nan }}** | {{ data.Description | clean_nan }} | {{ data.Classification | clean_nan }} | {{ data.RetentionPeriod | clean_nan }}  |
{% endfor %}


---

#5 Vue Applicative

##¬∑ Solution globale 

## üèóÔ∏è Patterns d'Architecture

### Patterns Appliqu√©s
{% for pat in patternsandprincipes %}
- **{{ pat.Name }}
{% endfor %}

```plantuml
!include diagrams/c4_context.puml
```

##¬∑ Solution d√©taill√©e ‚Äì & vues processus

### Vues par processus m√©tier
{% for p in businessprocesses %}
{% if p.ID | clean_nan and p.Name | clean_nan %}
#### {{ p.ID | clean_nan }} ‚Äì {{ p.Name | clean_nan }}
```plantuml
!include diagrams/process_{{ p.ID | clean_nan }}.puml
```
{% endif %}
{% endfor %}
---

# 5 ¬∑ Architecture Technique

## üåê Vue Infrastructure

### Diagramme d'Architecture R√©seau
```plantuml
!include diagrams/infrastructure_view.puml
```

###  D√©tails des ressources
| Layer | Service |Zone |Description |
|-------|---------|-----|------------|
{% for r in infra %}
| {{ r.Layer | clean_nan }} | {{ r.Service | clean_nan }} | {{ r.Zone | clean_nan }} | {{ r.Description | clean_nan }} |
{% endfor %}


## üöÄ Dimensionnement & Performance

### M√©triques de Dimensionnement

### Strat√©gie de Scalabilit√©

---

# 6 ¬∑ S√©curit√© & Conformit√©

## üõ°Ô∏è Architecture de S√©curit√©

### Vue d'Ensemble S√©curit√©
```plantuml
!include diagrams/security_view.puml
```

### Matrice des Contr√¥les de S√©curit√©
{{ security_table }}

## üîê Mod√®le de S√©curit√© & Zones R√©seau

### Contr√¥les par Couche
| Couche | Contr√¥les | Technologies |
|--------|-----------|--------------|
| **R√©seau** | Firewall, WAF, DDoS Protection | CloudFlare, AWS Shield |
| **Application** | OWASP Top 10, SAST/DAST | SonarQube, OWASP ZAP |
| **Donn√©es** | Chiffrement E2E, Tokenisation | AWS KMS, HashiCorp Vault |
| **Identit√©** | MFA, RBAC, SSO | Auth0, Azure AD |
| **Infrastructure** | CIS Benchmarks, Hardening | Chef InSpec, AWS Config |

### Segmentation S√©curit√©

#### Zones R√©seau
- **DMZ** : Services expos√©s (Web, API Gateway)
- **INTERNE** : Services m√©tier et donn√©es
- **PCI** : Traitement des paiements s√©curis√©

## üìä Monitoring & Observabilit√©

### Stack d'Observabilit√©
- **M√©triques** : Prometheus, Grafana
- **Logs** : ELK Stack (Elasticsearch, Logstash, Kibana)
- **Traces** : Jaeger, OpenTelemetry
- **Alerting** : PagerDuty, Slack

### SLIs/SLOs Essentiels
| Service | SLI | SLO | Error Budget |
|---------|-----|-----|--------------|
| API Gateway | Latence p99 | < 200ms | 0.1% downtime |
| Payment Service | Disponibilit√© | 99.9% | 43min/mois |
| User Service | Taux d'erreur | < 0.1% | 1000 erreurs/jour |

## üìã Conformit√© R√©glementaire

### Matrice de Conformit√©
| R√©glementation | Articles Applicables | Contr√¥les Impl√©ment√©s | Gap Analysis |
|----------------|---------------------|----------------------|--------------|
| **PCI-DSS** | Req. 3 (Protect stored data) | Tokenisation, Chiffrement | üü° En cours |
| **GDPR** | Art. 32 (Security of processing) | Pseudonymisation, Chiffrement | üü¢ Conforme |
| **ISO 27001** | A.12.1 (Operational procedures) | Proc√©dures document√©es | üü° En cours |

---

# 7 ¬∑ Glossaire

## üìñ Termes et D√©finitions

{% if glossaire %}
### Termes par Cat√©gorie

{% set categories = glossaire | groupby('Categorie') %}
{% for categorie, termes in categories %}
#### {{ categorie }}

{% for terme in termes %}
**{{ terme.Terme | clean_nan }}**
: {{ terme.Definition | clean_nan }}
{% if terme.Synonymes | clean_nan and terme.Synonymes != 'nan' %}
  
  *Synonymes* : {{ terme.Synonymes | clean_nan }}
{% endif %}
{% if terme.References | clean_nan and terme.References != 'nan' %}
  
  *R√©f√©rence* : [{{ terme.References | clean_nan }}]({{ terme.References | clean_nan }})
{% endif %}

{% endfor %}
{% endfor %}

### Index Alphab√©tique

{% for terme in glossaire | sort(attribute='Terme') %}
- **{{ terme.Terme | clean_nan }}** : {{ terme.Definition | clean_nan | truncate(100) }}
{% endfor %}

{% else %}
*Aucun terme d√©fini dans le glossaire. Veuillez ajouter des termes dans l'onglet 'Glossaire' du fichier Excel.*
{% endif %}

# 8 ¬∑ Documents de R√©f√©rence

## üìö R√©f√©rences et Standards Appliqu√©s

{% if references %}

### Documents par Cat√©gorie

{% set categories = references | groupby('Categorie') %}
{% for categorie, docs in categories %}
#### {{ categorie }}

{% for doc in docs %}
**{{ doc.ID | clean_nan }} - {{ doc.Titre | clean_nan }}**
{% if doc.Statut | clean_nan == 'Obligatoire' %}üî¥{% elif doc.Statut | clean_nan == 'Applicable' %}üü°{% else %}üü¢{% endif %}

- **Type** : {{ doc.Type | clean_nan }}
- **Version** : {{ doc.Version | clean_nan }}
- **Date** : {{ doc.Date_Publication | clean_nan }}
- **Pertinence** : {{ doc.Pertinence_Projet | clean_nan }}
- **Description** : {{ doc.Description | clean_nan }}
{% if doc.URL | clean_nan and doc.URL != 'nan' %}
- **Lien** : [{{ doc.URL | clean_nan }}]({{ doc.URL | clean_nan }})
{% endif %}

{% endfor %}
{% endfor %}

### Matrice de Conformit√©

| R√©f√©rence | Titre | Statut | Pertinence Projet |
|-----------|-------|--------|-------------------|
{% for doc in references %}
| {{ doc.ID | clean_nan }} | **{{ doc.Titre | clean_nan }}** | {% if doc.Statut | clean_nan == 'Obligatoire' %}üî¥ {{ doc.Statut | clean_nan }}{% elif doc.Statut | clean_nan == 'Applicable' %}üü° {{ doc.Statut | clean_nan }}{% else %}üü¢ {{ doc.Statut | clean_nan }}{% endif %} | {{ doc.Pertinence_Projet | clean_nan }} |
{% endfor %}

### L√©gende des Statuts

- üî¥ **Obligatoire** : Conformit√© requise (r√©glementation, standards de s√©curit√©)
- üü° **Applicable** : Standards et frameworks appliqu√©s au projet
- üü¢ **Recommand√©** : Bonnes pratiques et guides de r√©f√©rence

{% else %}
*Aucune r√©f√©rence d√©finie. Veuillez ajouter des documents dans l'onglet 'References' du fichier Excel.*
{% endif %}

# 9 ¬∑ Historique des R√©visions

## üìù Contr√¥le de Version du Document

{% if revisions %}

### Informations de Version Actuelle

{% set latest_revision = revisions | sort(attribute='Version') | last %}
- **Version actuelle** : {{ latest_revision.Version | clean_nan }}
- **Date de derni√®re modification** : {{ latest_revision.Date | clean_nan }}
- **Auteur** : {{ latest_revision.Auteur | clean_nan }}
- **Statut** : {% if latest_revision.Statut | clean_nan == 'Approuv√©' %}üü¢{% elif latest_revision.Statut | clean_nan == 'En r√©vision' %}üü°{% else %}üî¥{% endif %} {{ latest_revision.Statut | clean_nan }}

### Historique Complet des R√©visions

| Version | Date | Auteur | Type | Description | Statut |
|---------|------|--------|------|-------------|--------|
{% for revision in revisions | sort(attribute='Version') %}
| **{{ revision.Version | clean_nan }}** | {{ revision.Date | clean_nan }} | {{ revision.Auteur | clean_nan }} | {{ revision.Type_Modification | clean_nan }} | {{ revision.Description_Modifications | clean_nan }} | {% if revision.Statut | clean_nan == 'Approuv√©' %}üü¢{% elif revision.Statut | clean_nan == 'En r√©vision' %}üü°{% else %}üî¥{% endif %} {{ revision.Statut | clean_nan }} |
{% endfor %}

### Modifications par Type

{% set types_modif = revisions | groupby('Type_Modification') %}
{% for type_modif, revisions_list in types_modif %}
#### {{ type_modif }}

{% for revision in revisions_list %}
- **v{{ revision.Version | clean_nan }}** ({{ revision.Date | clean_nan }}) : {{ revision.Description_Modifications | clean_nan }}
  - *Sections impact√©es* : {{ revision.Sections_Impactees | clean_nan }}
  - *Impact projet* : {{ revision.Impact_Projet | clean_nan }}
{% if revision.Actions_Requises | clean_nan and revision.Actions_Requises != 'nan' %}
  - *Actions requises* : {{ revision.Actions_Requises | clean_nan }}
{% endif %}

{% endfor %}
{% endfor %}

### Matrice d'Approbation

| Version | Date | Type Modification | Approbateur | Statut | Actions Requises |
|---------|------|-------------------|-------------|--------|------------------|
{% for revision in revisions | sort(attribute='Version') %}
| {{ revision.Version | clean_nan }} | {{ revision.Date | clean_nan }} | {{ revision.Type_Modification | clean_nan }} | {{ revision.Approbateur | clean_nan }} | {% if revision.Statut | clean_nan == 'Approuv√©' %}üü¢ {{ revision.Statut | clean_nan }}{% elif revision.Statut | clean_nan == 'En r√©vision' %}üü° {{ revision.Statut | clean_nan }}{% else %}üî¥ {{ revision.Statut | clean_nan }}{% endif %} | {{ revision.Actions_Requises | clean_nan }} |
{% endfor %}

### L√©gende des Statuts

- üü¢ **Approuv√©** : Version valid√©e et officielle
- üü° **En r√©vision** : Version en cours de validation
- üî¥ **Rejet√©** : Version non valid√©e, modifications requises

### Prochaines R√©visions Planifi√©es

- [ ] **v{{ (latest_revision.Version | float + 0.1) | round(1) }}** : Mise √† jour post-audit de s√©curit√©
- [ ] **v{{ (latest_revision.Version | float + 0.2) | round(1) }}** : Int√©gration des retours utilisateurs
- [ ] **v{{ (latest_revision.Version | float + 1.0) | round(1) }}** : √âvolution majeure avec nouvelles capacit√©s

{% else %}
*Aucune r√©vision d√©finie. Veuillez ajouter l'historique des modifications dans l'onglet 'Revisions' du fichier Excel.*
{% endif %}

---
> **Version** : 3.0